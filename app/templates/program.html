{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}
<table class="table table-hover">
    <tr>
        <td width="256px"><img src="{{ program.image }}" alt="no image" width="200" height="200"></td>
        <td>
            <h1>{{ program.name }}</h1>
            <p>Interview structure: {% if program.body %}{{ program.body }}</p>{% endif %}

            {% if not current_user.is_following_program(program) %}
            <p>
                <form action="{{ url_for('main.follow_program', name=program.name) }}" method="post">
                    {{ form.hidden_tag() }}
                    {{ form.submit(value=_('Follow'), class_='btn btn-default') }}
                </form>
            </p>
            {% else %}
            <p>
                <form action="{{ url_for('main.unfollow_program', name=program.name) }}" method="post">
                    {{ form.hidden_tag() }}
                    {{ form.submit(value=_('Unfollow'), class_='btn btn-default') }}
                </form>
            </p>
            {% endif %}
            <p>
                <form action="{{ url_for('main.delete_program', name=program.name)}}" method="post">
                    {{ form.hidden_tag() }}
                    {{ form.submit(value=_('Delete'), class_='btn btn-default')}}
                </form>
            </p>
            <p>
                <form action="{{ url_for('main.add_interview', name=program.name)}}" method="post">
                    {{ form.hidden_tag() }}
                    {{ form.submit(value=_('Add Interview Invite'), class_='btn btn-default')}}
                </form>
            </p>
        </td>
    </tr>
</table>
<div id="divCalendar"></div>
{% for interview in interviews %}
{% include '_interview.html' %}
{% endfor %}
<p>
{% if postform %}
{{ wtf.quick_form(postform) }}
{% endif %}
</p>
<p>
{% for post in posts %}
{% include '_post.html' %}
{% endfor %}
</p>
<nav aria-label="...">
    <ul class="pager">
        <li class="previous{% if not prev_url %} disabled{% endif %}">
            <a href="{{ prev_url or '#' }}">
                <span aria-hidden="true">&larr;</span> {{ _('Newer posts') }}
            </a>
        </li>
        <li class="next{% if not next_url %} disabled{% endif %}">
            <a href="{{ next_url or '#' }}">
                {{ _('Older posts') }} <span aria-hidden="true">&rarr;</span>
            </a>
        </li>
    </ul>
</nav>
{% endblock %}

{% block scripts %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='fullcalendar.css') }}">
    <script src="{{ url_for('static', filename='fullcalendar.min.js') }}"></script>
    <script>
      /*  $(document).ready(function () {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    var myEvents =[
    {% for interview in interviews %}
    {
        title: 'Interview',
        start: '{{ interview.date.year }}-0{{ interview.date.month }}-0{{ interview.date.day }}'
    },
    {% endfor %}
    ];
    var calendar = $('#divCalendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek ,basicDay'
        },
        buttonText: {
            prev: 'prev',
            next: 'next'
        },
        timeFormat: 'h(:mm)t',
        selectable: true,
        dayClick: function (date, allDay, jsEvent, view) {
            alert(date);
        },
        eventClick: function (calEvent, jsEvent, view) {
            alert('Event: ' + calEvent.title);
            // change the border color just for fun
            $(this).css('border-color', 'red');

        },
        select: function (start, end, allDay) {
            var title = prompt('Event Title:');
            if (title) {
                calendar.fullCalendar('renderEvent', {
                    title: title,
                    start: start,
                    end: end,
                    allDay: allDay
                },
                true // make the event "stick"
                );
            }
            calendar.fullCalendar('unselect');
        },
        events: myEvents
    });
});*/
    </script>
{% endblock %}